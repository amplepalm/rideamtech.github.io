

# Mandla SMS Wallet

<hr/>



Mandla Money's wallet is a powerful tool designed to provide you with convenient access to your funds, seamless transactions, and robust security measures. Whether you're sending money to friends, making online purchases, or managing your investments, our wallet offers a user-friendly interface and a wide range of functionalities to meet your financial needs.

With Mandla Money's wallet, you can effortlessly check your account balance, send and receive funds from anywhere in the world, convert currencies, and even make withdrawals to external bank accounts. We've made it our mission to ensure a smooth and intuitive user experience while maintaining the highest standards of security to protect your assets and personal information.

In this documentation, you will find step-by-step instructions, detailed explanations, and useful tips to help you navigate the wallet's features with confidence. Whether you're a first-time user or an experienced investor, this guide will provide you with the knowledge and resources to make the most of Mandla Money's wallet.

We encourage you to explore the documentation thoroughly, as it covers everything from the initial setup process to advanced features and troubleshooting tips. Additionally, we've included a frequently asked questions (FAQs) section to address common queries and provide quick solutions.

Should you encounter any difficulties or have further questions, our dedicated support team is here to assist you. Feel free to reach out to us via our support channels, which are detailed in the "Contact Support" section.

Thank you for choosing Mandla Money's wallet.

<div style="page-break-after: always;"></div>

## Mandla Wallet Overview

### **System Requirements** 

To use Mandla Money SMS Wallet, please ensure that you have the following:

* **Device Requirements:** Compatible with any mobile phone that supports SMS messaging.

* **Geographic Compatibility:**  Mandla Wallet is accessible through SMS in South Africa, United Kingdom, United States, and Australia.

<br/>

### **Initiation Process**

Mandla Money SMS Wallet (Mandla Wallet) is a digital wallet that enables users to receive, transact, and store value using digital assets via SMS, without the need for a smartphone or an internet connection. It allows you to send and receive payments similar to using Apple Pay over text messages, with the XRP Ledger as the payment rail. For more information, visit  https://mandla.money.

Depending on your location, follow these steps to get started:

* South Africa: SMS "Hello Mandla" to +27600178563.
* United Kingdom: SMS "Hello Mandla" to +44 7458 157486.
* United States: SMS "Hello Mandla" to +1 743 239 2972.
* Australia: SMS "Hello Mandla" to +61 483 908 552.

<br/>


### **SMS Wallet Commands**

**General Functionality**

| Commands | Function |
| ------ | ------ |
| Initialise wallet | Send an SMS with the message "Hello Mandla" to initialise the wallet| 
Register/Create Wallet | Use the command "Register" to create a new wallet
Activate Wallet| If you receive funds and your wallet is automatically created, use the command "Activate" to activate your wallet
Check Wallet Balance| Send an SMS with the command "Balance" to check your wallet balance
Activate Help | Send an SMS with the command "Help" to activate the help functionality


<br/>

<div style="page-break-after: always;"></div>

**Sending / Receiving / Withdrawing funds**

The process of trasnferring and withdrawing funds using a mandla wallet can be executed using the following SMS commands. 

**Asset**: The asset refers to the specific tokens setup within the system. For example: "USD", "ZAR", etc.

**Tag**: Each user of the Mandla wallet is assigned an XRP tag that is unique to their cell number. This tag is used to transfer/recieve or withdraw funds. **A CELL NUMBER can also be used in place of a user tag** 

| Commands | Function |
| ------ | ------ |
| Sending Funds to a Mandla user | Send an SMS in the following format "send#asset#tag#value"
| Receiving Funds from a Mandla user | Send an SMS in the following format "receive#asset#tag#value"
| Withdrawing Funds from your Mandla wallet | Send an SMS in the following format "withdraw#asset#tag#value"

<br/>

**Get Help**

Use the relevant "HELP" commands mentioned in this section section to receive instructions on sending funds, making withdrawals, or receiving funds/funding your wallet.

* "HELP SEND"

* "HELP RECEIVE"

* "HELP WITHDRAW"

<br/>

### **Funding your Mandla Wallet**

After successful registration, you need to send XRP to the Mandla Wallet custody account "rBBFeyRk19orSKU8k9JhF1A7KcQgM1dqse" along with your memo (provided during registration).

Alternatively, refer to the "Get HELP" section in the SMS Wallet Commands for instructions on receiving funds and funding your wallet.

<br/>

*The illustration below shows how a registered user can access their Mandla Wallet account. This is shown using a Testnet version of the XUMM app which is a non custodial wallet to access the XRP ledger. For more information, visit the [XUUM Website](https://xumm.app/)*

* Select "ADD ACCOUNT" to setup your registered account on XUUM

<br/>


<img src="/images_mwoverview/xumm_accounts_1.jpg"  width="300" height="600">

* Select "Import an existing account" and select "Full access" to allow for transactions to take place.

<br/>

<img src="/images_mwoverview/xumm_accounts_2.1.jpg"  width="300" height="600">
<img src="/images_mwoverview/xumm_accounts_2.2.jpg"  width="300" height="600">

* Enter the secret "Family Seed" which is the private key/memo given to the user at the time of registration. 

<br/>

<img src="/images_mwoverview/xumm_accounts_3.jpg"  width="300" height="600">

* The user would now be able to view their Mandla Wallet's public account address. Verify this address and select "Confirm". The address of this user account is "rHNiCigAcqP9eZY6zGqLFVZCEKJHQBhBxd".

<br/>

<img src="/images_mwoverview/xumm_accounts_4.jpg"  width="300" height="600">

* Setup "Standard"/"Extra Security"

<br/>

<img src="/images_mwoverview/xumm_accounts_5.jpg"  width="300" height="600">

* Enter a name for your account 

<br/>

<img src="/images_mwoverview/xumm_accounts_6.jpg"  width="300" height="600">

* The user account is setup and ready to use! A summary of the account can be viewed

<br/>

<img src="/images_mwoverview/xumm_accounts_7.jpg"  width="300" height="600">

*The user's Mandla Wallet can be funded the XRP faucet, an XRP Ledger test network to test changes to the XRP Ledger. For more information, visit [XRP faucets](https://xrpl.org/xrp-testnet-faucet.html)*

* Enter the public address of the user account. Enter the number of XRP "drops" to be transferred

<br/>

<img src="/images_mwoverview/xrpfaucet.jpg"  width="600" height="300">

<br/>

### **Using Mandla Wallet**

Once your wallet is funded, you can perform the following operations:

**Check Balance:** Send an SMS with the command "Balance" to get your wallet balance.

<br/>

<img src="/images_mwoverview/sms_commands_1.jpg"  width="300" height="600">

**Send Funds:** To send XRP or ZAR to another Mandla user in the same country, use the respective commands mentioned in the SMS Wallet Commands section.

<br/>


<img src="/images_mwoverview/sms_commands_2.jpg"  width="300" height="600">


*The illustration shows below shows the transfer of funds between two registered Mandla Wallet users on the Testnet version of the XUMM app*

* Select the "SEND" option and enter the public key of the destination account. In this example, XRP is transferred to the Mandla Money custody address with the Mandla ID "12345" 

<br/>

<img src="/images_mwoverview/xrp_transfer_1.jpg"  width="300" height="600">

<br/>

<img src="/images_mwoverview/xrp_transfer_2.jpg"  width="300" height="600">

<br/>

<img src="/images_mwoverview/xrp_transfer_3.jpg"  width="300" height="600">

* A summary of the transaction can be seen. The user is required to confirm the Mandla ID. "SEND" is pressed and the transaction is successful.
  
<br/>

<img src="/images_mwoverview/xrp_transfer_4.jpg"  width="300" height="600">

<br/>

<img src="/images_mwoverview/xrp_transfer_5.jpg"  width="300" height="600">

<br/>


<img src="/images_mwoverview/xrp_transfer_6.jpg"  width="300" height="600">

<br/>

### **Security and User Privacy**

Mandla wallet is a safe and secure means of handling your transcations. The following security measures are in place to protect the users and their funds:

*  **Email alerts** are sent to system administrators for high value transactions.  

* **Automated scheduled tests** are conducted to compacre on chain transactions with off-chain user balances to compare on chain transactions with off-chain user - these are expected to reconcile and alert system administrators periodically.

* Continuous **web application uptime monitoring.**

* Our cloud service provider implements **distributed denial-of-service (DDos) mitigation
such as connection rate limiting, and prohibits** (and actively blocks attempts) **port
scanning.**

* **Email notifications** are sent out to system administrators everytime an administrator logs in to the wallet backend. 

<br/>

Mandla wallet prioritises user privacy and protects access to any personal information by placing the following measures: 
<br/>

* **Anonymised Mandla ID:** Offline payments make use of a receiver's cellphone number or Mandla ID (Mandla IDs and user cellphone numbers are mapped in the backend). The Mandla ID is a randomly generated sequence of numbers which does not reveal anything about the associated
user (e.g. an example Mandla ID is 333838471). No previously unknown information is
leaked to a sender or a receiver outside of the corresponding cellphone number and
Mandla ID.
 

<div style="page-break-after: always;"></div>

## Background Architecture

Mandla Wallet is built using a Django webserver hosted on Heroku. The XRPL library is used to interact with the XRP ledger. An online SMS Gateway (currently Twilio) is used to to relay SMSs from users to the server. 

The user is required to initialise their wallet which connects them to the Mandla Wallet server through the online SMS gateway. Each user has a uniqe "tag" identified by their cell number. The user then can send specific commands using SMS which are then transferred to the Mandla Wallet webserver. 


![Architecture](/images_mwoverview/Architecture_diagram.jpg)

<br/>

**Transfer of Funds** <a id="transfer_of_funds"></a>

Settlement is achieved in under 5 seconds from initiation of the transaction via SMS.
There are two types of payment flows that the Mandla SMS Wallet supports:

- **Payments initiated by a non-Mandla wallet user to a Mandla wallet user:**  
  In this instance, a user sends the digital asset from another application or exchange to a
Mandla wallet user using the Mandla wallet universal custody address (that is specific to any of the supported blockchain networks) and includes a Mandla ID reference of the receiver. In this case, the transaction happens on-chain (by accessing the XRP Ledger) and once finalised, the Mandla Wallet receiver is notified.

  The time constraint here is the amount of time for a transaction to be finalised on the blockchain network. The Mandla backend service polls the blockchain network every 10 seconds.

- **Payments initiated by a Mandla Wallet user to another Mandla Wallet user:**  
  In this instance, user account balances are updated offchain(without having to accessing the XRP Ledger) and there is no
interaction with the blockchain network. Settlement happens as soon as the sender’s SMS is received and processed server side - which is sub-5 seconds.  

  The time constraint here is the receiving and processing of the sender’s SMS by the Mandla backend server which in turn is based on the internet SMS gateway.

- **External transactions on the blockchain with the user's account**
  In this instance, if a user receives funds from an external network these transactions are processed and the user's funds are updated accordingly on the Mandla Wallet. The blockchain is regularly queried to check for such transactions. 


<br/>

![process flow](/images_mwoverview/process_flow.jpg)

<br/>

**The XRP Ledger** <a id="xrp_ledger"></a>

XRP is a cryptocurrency that runs on the XRP Ledger, which is a decentralised public blockchain led by a global community of  developers.  

Mandla wallet has a central custody account identified with "rBBFeyRk19orSKU8k9JhF1A7KcQgM1dqse". Each user is assigned a memo upon registration. A unique tag is generated for each Mandla Wallet user when the first SMS is sent using their cell number. 

<br/>

![XRPL tags](/images_mwoverview/XRPL_tags.jpg)

<br/>

**On-ramping and Off-ramping** <a id="on-ramping_off-ramping"></a>

The convertion between physical cash and a digital asset on the XRP Ledger occurs via an agent. A user issues this transaction via a Mandla Wallet agent who converts the user's physical cash to stablecoin on the XRP Ledger which the user can then access through their Mandla Wallet on their devices to transact digital currency. A user is also able to withdraw the digital currency stored on their Mandla Wallet in the form of physical cash through a Mandla wallet agent. 

<br/>

![cash flow](/images_mwoverview/Cash_flow.jpg)


<div style="page-break-after: always;"></div>

## Troubleshooting

There are a number of measures in place to help the user navigate the usage of the Mandla Wallet. These measures are shown in the table below for potential issues faced by users. 
<br/>

| User Issues | Solution prompts |
| ------ | ------ |
| A registered/unregistered wallet user sends an incorrect SMS message prompt e.g. “Hi mandla” instead of “Hello mandla” | Wallet user receives an invalid message response and instructions on how to use the wallet|
Invalid recipient number provided by sender | Sender receives an "invalid recipient phone number received" message and instructiona on how to use the wallet |
Invalid asset sent by sender (i.e. an asset not in the list of supported assets) | Sender receives an "invalid asset specified" message |
Sender attempts to carry out a transfer with an insufficient balance (for a supportedasset) | Sender receives an insufficient balance message |
An error occurs during transfer from a Mandla Wallet to an XRPL account | Senderreceives a "Transaction unsuccessful, please try again" message|

*There is no retry capability at present.* 

<br/>

<div style="page-break-after: always;"></div>

## Glossary of Terms

<br/>

**Blockchain** - A blockchain is a digital database or ledger which is shared among the nodes of a computer network to maintain a secure and decentralised record of transactions.  

**Cryptocurrency** - A cryptocurrency is a form of digital currency designed to be exchanged on a computer network such as a blockchain. It is decentralised and therefore does not rely on any central authority such as the government to maintain it. 

**Stablecoin** - A stablecoin is a type of cryptocurrency where its value is determined with reference to the value of a relatively stable asset such as trade commodities, fiat currency or any other cryptocurrency. 

**The XRP Ledger (XRPL)** - It is a decentralised blockchain network that allows for fast, low-cost, real-time transfer of digital assets. “Ripple” is the payment network of the XRP Ledger. 

**Ripple** - Ripple is a blockchain based digital- payment network and protocol that supports the transfer of tokens representing cryptocurrency, fiat currency or any other unit of value. It is one of the most valuable blockchain based tokens according to its market capitalisation. 

**XRP** - The cryptocurrency used by Ripple is called XRP. 

**Testnet** - A testnet is an instance of a blockchain network, powered by the same underlying software, used for testing the features of the network without risking real funds on the main network. 

<br/>

<div style="page-break-after: always;"></div>

## Frequently Asked Questions 
<br/>

**Q: How do you prevent Twilio from stealing XRP?**

This is an inherent risk with using an internet SMS gateway. We have thought of using an alternative provider for delivery of one time pins (OTPs) but this risk exists in the event of collusion between Twilio and the alternative SMS gateway.

**Q: How do you prevent SMS spoofers from stealing XRP?**

The use of OTP’s delivered to the sender’s mobile device for time-based authentication of the wallet. The SMS spoofer will need to hijack the wallet users mobile device in order to get access to the OTP.

**Q: How do you prevent spying?**

Communication between the Mandla Wallet server and Twilio is encrypted, we make use of SSL. However, communication between the wallet users mobile device and Twilio is unencrypted, and in theory can be spied upon, the same way that regular SMS messages between a mobile device and mobile network can be vulnerable.

**Q: How do you store the keys?**

Currently keys are stored as environment variables on the application server. Access to the application server is 2FA controlled. Key management will be offloaded to key management servers or custody providers.

**Q: How are transactions signed for?**

The application server controls the custody account. Once a request to transfer funds from a Mandla Wallet to an XRPL account is received and validated (authentication passes, transfer message is well formed, balance checks pass) then the application server signs the transaction.

**Q: Why do you poll only every 5 mins, is it possible to have payment notifications / balances update instantly?**

Initially the polling service was configured to poll the XRP ledger every 10 minutes (in a development environment). This has now been updated to poll every minute. Payment notifications / balance updates within the Mandla ecosystem are instant.

**Q: How would you implement 2FA for payments?**
We have implemented the use of OTP for time-based wallet authentication (i.e. 15 minute sessions). This
could be supplemented by an OTP phone call when requesting to carry out a transaction.

**Q: Is there a self-custody / semi-self-custody key management solution you could implement to make signing
transactions more secure?**

We can investigate use of trusted execution environments (TEEs) and hardware enclaves such that the
application server is oblivious of user keys. However, this could be for the next iteration of the product
once features such as the admin UI etc are complete.

**Q: Can you set transaction limits?**

This is a recurring question and currently on our backlog.

**Q: SMS messages are not encrypted and so can be spied on. Is there a solution to prevent this?** 

See earlier comments on use of SSL between the Mandla Wallet application server and the SMS
gateway.

**Q: How scalable is your solution?**

* We have not benchmarked the platform from a performance point of view.
* The platform can support any XRPL-issued asset (these can be configured by a server admin).
* Similarly, enabling support for an additional country is contingent on support by Twilio for the specific country (or integration with a mobile network operator [MNO]) and
configuration by a server admin.

**Q: Could users get their own wallet address, rather than a shared wallet?**

This is possible either using a custody provider or a secure enclave (TEE) but this comes with overhead.

**Q: Can you provide this solution in other languages?**\

Yes. This is also a recurring question. Localisation is possible and will be added to the backlog.

**Q: Can we limit the currencies a user receives - or have them request one currency specifically?**

This is not currently implemented but is possible. An admin could configure this. This can be added to the
backlog.

**Q: Can we add a call to receive a history of transactions in case they lost the text history?**

Not currently implemented but possible. We can implement this via SMS e.g. send Yes. history sms to pull from SMS state.

**Q: What happens if Twilio goes down?**

If Twilio goes down, users will be unable to transact - i.e. there will be no responses to wallet prompts. The alternative is to build some redundancy by purchasing an alternative sms number from other service providers e.g. Best case scenario is to integrate directly with an in-country MNO e.g. Vodacom.

**Q: Is there a way the Mandla Money address can be copied in an easier way?**

We can configure an SMS prompt to return the MandlaID or Wallet address - e.g. help wallet address.

**Q: How easy is it to add more regions/numbers?**

This can be configured by a system admin. Purchase a country number on Twilio, complete endpoint
configuration and then update the server config. That said, integration with MNOs in each country of
operation is the ideal.

**Q: Feedback from other users?**

We have not yet run a pilot. Mainly demos and Q&amp;A’s such as the list of questions you have provided.

<br/>

<div style="page-break-after: always;"></div>

## About

Co-founded by Titose Chembezi, Julian Kanjere, and Egnatius Phiri, Mandla Money is a Blockchain powered FinTech startup creating products that drive financial inclusion and enable users to receive, transact and store value using low-tech (SMS, WhatsApp, USSD etc). Our flagship product is the Mandla Wallet which enables offline stablecoin and CBDC payments. At Mandla Money, we advance financial inclusion and boost economic participation in emerging economies through low-tech digital wallets. 

<br/>

<div style="page-break-after: always;"></div>












































